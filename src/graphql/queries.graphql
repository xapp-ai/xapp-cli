query getProfile {
  profile {
    email
  }
}

query getOrgAnalytics($orgId: ID!, $startDate: DateTime!, $endDate: DateTime!) {
  org(organizationId: $orgId) {
    _id
    __typename
    name
    analytics {
      user(start: $startDate, end: $endDate) {
        newUsers
        returningUsers
        totalSessions
        totalUsers
      }
    }
  }
}

query getAppsForOrg($organizationId: ID!, $from: Int = 0, $size: Int = 10) {
  org(organizationId: $organizationId) {
    apps(from: $from, size: $size) {
      total
      apps {
        appId
        organizationId
        name
        largeIcon
        smallIcon
        description
        summary
        status {
          type
          timestamp
          notes
          email
        }
      }
    }
  }
}

query getAppOverview(
  $appId: ID!
  $start: DateTime!
  $end: DateTime!
  $env: [String]
) {
  app(appId: $appId) {
    __typename
    _id
    appId
    name
    description
    summary
    organizationId
    invocationName
    templateType
    icon
    smallIcon
    largeIcon
    banner
    largeBanner
    status {
      type
      timestamp
      email
    }
    handlers(size: 1000) {
      _id
      total
      handlers {
        _id
        name
        intentId
        type
      }
    }
    intents(size: 1000) {
      _id
      total
      intents {
        _id
        name
        intentId
      }
    }
    entities(size: 1000) {
      _id
      total
      entities {
        _id
        entityId
        displayName
      }
    }
    content {
      __typename
      total
      content {
        __typename
        _id
        name
        url
      }
    }
    contentSources {
      __typename
      total
      sources {
        __typename
        webUrl
        webUrlPatterns
      }
    }
    faq {
      total
    }
    channels {
      __typename
      type
      id
      name
      ... on ChatWidgetAppChannel {
        key
        theme {
          primaryColor
        }
      }
      ... on IntelligentSearchAppChannel {
        key
        theme {
          accentColor
        }
      }
    }
    analytics {
      user(start: $start, end: $end, byEnvironment: $env) {
        totalUsers
        totalSessions
        returningUsers
        newUsers
      }
    }
  }
}

query getAppContent($appId: ID!, $size: Int!, $from: Int!) {
  app(appId: $appId) {
    appId
    contentSources {
      __typename
      total
      sources {
        __typename
        webUrl
        webUrlPatterns
      }
    }
    content(size: $size, from: $from) {
      total
      content {
        _id
        name
        url
        type
        lastUpdated
        text
      }
    }
    faq(size: $size, from: $from) {
      total
      faq {
        name
        raw
        answer
        questions
      }
    }
  }
}

query getAppAnalytics($appId: ID!, $startDate: DateTime!, $endDate: DateTime!) {
  app(appId: $appId) {
    _id
    __typename
    name
    analytics {
      user(start: $startDate, end: $endDate) {
        newUsers
        returningUsers
        totalSessions
        totalUsers
      }
    }
  }
}

query getAppSchedules($appId: ID!) {
  app(appId: $appId) {
    schedules {
      schedules {
        scheduleId
        type
        event
        parameters
      }
    }
  }
}

query getAnalyticsAndEvents(
  $appId: ID!
  $startDate: DateTime!
  $endDate: DateTime!
  $byTag: [String]
  $byRequestIntentId: [String]
  $byChannel: [String]
) {
  app(appId: $appId) {
    _id
    __typename
    appId
    name
    analytics {
      user(start: $startDate, end: $endDate) {
        newUsers
        returningUsers
        totalSessions
        totalUsers
      }
    }
    events(
      startDate: $startDate
      endDate: $endDate
      byTag: $byTag
      byRequestIntentId: $byRequestIntentId
      byChannel: $byChannel
    ) {
      total
    }
  }
}

query getEvents(
  $appId: ID!
  $startDate: DateTime!
  $endDate: DateTime!
  $size: Int = 10
  $from: Int = 0
  $byTag: [String]
  $byRequestIntentId: [String]
  $byChannel: [String]
) {
  app(appId: $appId) {
    _id
    __typename
    appId
    name
    events(
      size: $size
      from: $from
      startDate: $startDate
      endDate: $endDate
      byTag: $byTag
      byRequestIntentId: $byRequestIntentId
      byChannel: $byChannel
    ) {
      total
      events {
        eventId
        channel
        platform
        userId
        sessionId
        eventTime
        currentHandler
        selectedHandler
        environment
        eventType
        eventName
        request
        slots {
          name
          rawValue
          slotValue
        }
        stentorRequest {
          intentId
          rawQuery
          matchConfidence
        }
        response {
          outputSpeech {
            displayText
            ssml
            suggestions {
              title
              url
            }
          }
          reprompt {
            displayText
            ssml
            suggestions {
              title
              url
            }
          }
        }
        rawQuery
        errorCode
        errorMessage
        payload
      }
    }
  }
}
